<% include partials/header %>

<body>
    
<!-- Following Menu -->
<div class="ui large top fixed hidden menu">
  <div class="ui container">
    <a href="/" class="item">Home</a>
    <a href="/catalogue" class="active item">The Catalogue</a>
    <a href="../about" class="item">About</a>
    <div class="right menu">
      
    <% if(!currentUser) { %>
      
      <div class="item">
        <a href="/login" class="ui button">Log in</a>
      </div>
      <div class="item">
        <a href="/login" class="ui primary button">Sign Up</a>
      </div>
      
  <% } else { %>
      <div class="item">
        <a href="/user/<%= currentUser._id %>" class="ui button">logged in as <%= currentUser.username %></a>
        <a href="/logout" class="ui primary button">Log Out</a>
      </div>
      
    <% } %>
    </div>
  </div>
</div>

<!-- Sidebar Menu -->
<div class="ui vertical inverted sidebar menu">
  <a href="/" class="item">Home</a>
  <a href="/catalogue" class="active item">The Catalogue</a>
  <a href="../about" class="item">About</a>
  <% if(!currentUser) { %>
  <a href="/login" class="item">Login</a>
  <a href="/login" class="item">Signup</a>
  <% } else { %>
  <a href="/user/<%= currentUser._id %>" class="item">Profile Page</a>
  <a href="/logout" class="item">Log Out</a>
    <% } %>
  
</div>


<!-- Page Contents -->
<div class="pusher">
    <!-- menu and banner -->
    <div class="ui inverted vertical masthead center aligned segment">

    <div class="ui container">
      <div class="ui large secondary inverted pointing menu">
        <a class="toc item">
          <i class="sidebar icon"></i>
        </a>
        <a href="/" class="item">Home</a>
        <a href="/catalogue" class="active item">The Catalogue</a>
        <a href="../about" class="item">About</a>
        <div class="right item">
          
          <% if(!currentUser) { %>
            <a href="/login" class="ui inverted button">Log in</a>
            <a href="/register" class="ui inverted button">Sign Up</a>
          <% } else { %>
            <a href="/user/<%= currentUser._id %>" class="ui inverted button">logged in as <%= currentUser.username %></a>
            <a href="/logout" class="ui inverted button">Log Out</a>
          <% } %>
          
        </div>
      </div>
    </div>

    <div class="ui text container">
      <h1 class="ui inverted header">
        Profile Page
      </h1>
      <h2>of corse, there will be more here in future</h2>
    </div>

  </div>

  <div class="ui container abcd">
    
    <div class="ui middle aligned center aligned grid">
      
      <div class="column">
      
        <% if(currentUser && user._id.equals(currentUser._id)) { %>
          
          <h1><%=user.username%></h1> <a class="ui mini teal button" href="/user/<%= user._id %>/edit">Edit Profile</a>
        
        <% } else {%>
          <h1><%=user.username%></h1>
        <% } %>
        
        <p>email: <%= user.email %></p>
        <p>name: <%= user.firstName + " " + user.lastName %></p>
        <p>description: <%= user.description %></p>
        
        <% if(currentUser && user._id.equals(currentUser._id)) { %>
        
        <a href="/catalogue/new">Add a new business</a>
        
        <% } %>
        <p> businesses: this doens't look like much, but I'll have them be a horizontally scrolling set of cards</p>
        
                <div class="ui container abcd">
    </div>
    
        <div class="ui five special doubling cards ">
        <% business.forEach(function(business){ %>
           
                <div class="card">
                    <div class="blurring dimmable image">
                      <div class="ui dimmer">
                        <div class="content">
                          <div class="description">
                            <%= business.description %>
                          </div>
                        </div>
                      </div>
                      <img src="<%= business.image %>">
                    </div>
                    <div class="content">
                      <a href="/catalogue/<%= business._id %>" class="header"><%= business.name %></a>
                      <div class="meta">
                        <p class="date"><%= business.dateCreated %></p>
                        <% for(var i=0; i<business.category.length; i++) { %>
                        <a href="#" class="meta"><%=business.category[i]%></a>
                          <% }; %>
                      </div>
                    </div>
                    <div class="extra">
                      Rating:
                      <div class="ui star rating" data-rating="4" data-max-rating="5"></div>
                    </div>
                  </div>
         <% }); %>
        
            </div>

    </div>
      </div>
      
    </div>
  </div>  
  
</div>

<% include partials/footer %>